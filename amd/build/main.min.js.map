{"version":3,"file":"main.min.js","sources":["../src/main.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * General plugin JS functions.\n *\n * @module     report_courseagenda/main\n * @copyright  2025 David Herney @ BambuCo\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\n\n/**\n * Component initialization.\n *\n * @method init\n *\n */\nexport const init = () => {\n\n    $('.mag-section_unit').on('click', function(e) {\n        clickSectionUnit(e, $(this));\n    });\n\n    $('.mag-activity').on('click', function(e) {\n        clickActivity(e, $(this));\n    });\n};\n\n/**\n * Click on a module/section.\n *\n * @method clickSectionUnit\n * @param {Object} e\n * @param {Object} $moduleUnit\n */\nfunction clickSectionUnit(e, $moduleUnit) {\n    if (!$moduleUnit.hasClass('mag-unit-bloqued')) {\n        return;\n    }\n\n    const $conditionsInfo = $moduleUnit.find('.mag-unit_conditions-info');\n\n    if ($moduleUnit.hasClass('active')) {\n        $moduleUnit.removeClass('active');\n        $conditionsInfo.css('max-height', '0');\n    } else {\n        closeAllModules();\n        $moduleUnit.addClass('active');\n        $conditionsInfo.css('max-height', $conditionsInfo[0].scrollHeight + 'px');\n    }\n\n    e.preventDefault();\n}\n\n/**\n * Click on an activity.\n *\n * @method clickActivity\n * @param {Object} e\n * @param {Object} $activity\n */\nfunction clickActivity(e, $activity) {\n\n    const $info = $activity.find('.mag-agenda_activity-info');\n    const $hoverInfo = $activity.find('.mag-activity_border-text');\n    const $hoverContent = $activity.find('.mag-activity_content');\n    const $icons = $activity.find('.mag-container_icons-show-more');\n\n    if ($activity.hasClass('active')) {\n        $activity.removeClass('active');\n        $info.css('height', '0');\n        $hoverInfo.show();\n        $hoverContent.css('padding', '');\n        $icons.find('[data-angleop=\"more\"]').show();\n        $icons.find('[data-angleop=\"collapse\"]').hide();\n    } else {\n        closeAllAgendaActivities();\n        $activity.addClass('active');\n        $info.show();\n        $info.css('height', $info[0].scrollHeight + 'px');\n        $hoverContent.css('padding', '0');\n        $hoverInfo.hide();\n        $icons.find('[data-angleop=\"more\"]').hide();\n        $icons.find('[data-angleop=\"collapse\"]').show();\n    }\n}\n\n/**\n * Close all activities.\n *\n * @method closeAllAgendaActivities\n */\nfunction closeAllAgendaActivities() {\n    $('.mag-section_activity > div').each(function() {\n        var $this = $(this);\n        $this.removeClass('no-hover active');\n        $this.find('.mag-agenda_activity-info').css('height', '0');\n        $this.find('.mag-activity_border-text').show();\n        $this.find('.mag-activity_content').css('padding', '');\n        $this.find('.mag-container_icons-show-more [data-angleop=\"more\"]').show();\n        $this.find('.mag-container_icons-show-more [data-angleop=\"collapse\"]').hide();\n    });\n}\n\n/**\n * Close all modules.\n */\nfunction closeAllModules() {\n    const allModuleUnits = document.querySelectorAll('.mag-unit-bloqued');\n    allModuleUnits.forEach(moduleUnit => {\n        const conditionsInfo = moduleUnit.querySelector('.mag-unit_conditions-info');\n        moduleUnit.classList.remove('active');\n        conditionsInfo.style.maxHeight = '0';\n    });\n}\n"],"names":["on","e","$moduleUnit","hasClass","$conditionsInfo","find","removeClass","css","document","querySelectorAll","forEach","moduleUnit","conditionsInfo","querySelector","classList","remove","style","maxHeight","addClass","scrollHeight","preventDefault","clickSectionUnit","this","$activity","$info","$hoverInfo","$hoverContent","$icons","show","hide","each","$this","clickActivity"],"mappings":";;;;;;;wJA+BoB,yBAEd,qBAAqBA,GAAG,SAAS,SAASC,aAgBtBA,EAAGC,iBACpBA,YAAYC,SAAS,iCAIpBC,gBAAkBF,YAAYG,KAAK,6BAErCH,YAAYC,SAAS,WACrBD,YAAYI,YAAY,UACxBF,gBAAgBG,IAAI,aAAc,OAgEfC,SAASC,iBAAiB,qBAClCC,SAAQC,mBACbC,eAAiBD,WAAWE,cAAc,6BAChDF,WAAWG,UAAUC,OAAO,UAC5BH,eAAeI,MAAMC,UAAY,OAjEjCf,YAAYgB,SAAS,UACrBd,gBAAgBG,IAAI,aAAcH,gBAAgB,GAAGe,aAAe,OAGxElB,EAAEmB,iBA/BEC,CAAiBpB,GAAG,mBAAEqB,8BAGxB,iBAAiBtB,GAAG,SAAS,SAASC,aAsCrBA,EAAGsB,iBAEhBC,MAAQD,UAAUlB,KAAK,6BACvBoB,WAAaF,UAAUlB,KAAK,6BAC5BqB,cAAgBH,UAAUlB,KAAK,yBAC/BsB,OAASJ,UAAUlB,KAAK,kCAE1BkB,UAAUpB,SAAS,WACnBoB,UAAUjB,YAAY,UACtBkB,MAAMjB,IAAI,SAAU,KACpBkB,WAAWG,OACXF,cAAcnB,IAAI,UAAW,IAC7BoB,OAAOtB,KAAK,yBAAyBuB,OACrCD,OAAOtB,KAAK,6BAA6BwB,6BAmB3C,+BAA+BC,MAAK,eAC9BC,OAAQ,mBAAET,MACdS,MAAMzB,YAAY,mBAClByB,MAAM1B,KAAK,6BAA6BE,IAAI,SAAU,KACtDwB,MAAM1B,KAAK,6BAA6BuB,OACxCG,MAAM1B,KAAK,yBAAyBE,IAAI,UAAW,IACnDwB,MAAM1B,KAAK,wDAAwDuB,OACnEG,MAAM1B,KAAK,4DAA4DwB,UAvBvEN,UAAUL,SAAS,UACnBM,MAAMI,OACNJ,MAAMjB,IAAI,SAAUiB,MAAM,GAAGL,aAAe,MAC5CO,cAAcnB,IAAI,UAAW,KAC7BkB,WAAWI,OACXF,OAAOtB,KAAK,yBAAyBwB,OACrCF,OAAOtB,KAAK,6BAA6BuB,QA3DzCI,CAAc/B,GAAG,mBAAEqB"}